{
  "gitSyncId": "67f2b9e9eaeec147fade89ce_0cfd631d-b2f1-4830-8ccc-2af6ec24aef6",
  "id": "Products_getProductsWithMetadata",
  "pluginId": "mysql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "-- Main products query\n-- Store this as getProductsWithMetadata\nSELECT \n  p.ID, \n  p.post_title, \n  p.post_content,\n  p.post_excerpt,\n  p.post_name,\n  p.post_date,\n  p.post_modified,\n  pm.meta_key, \n  pm.meta_value,\n  COUNT(wbi.bundle_id) as is_bundle,\n  img.guid as image_url\nFROM wp_posts p\nLEFT JOIN wp_postmeta pm ON p.ID = pm.post_id\nLEFT JOIN wp_woocommerce_bundled_items wbi ON p.ID = wbi.bundle_id\nLEFT JOIN wp_postmeta thumb ON p.ID = thumb.post_id AND thumb.meta_key = '_thumbnail_id'\nLEFT JOIN wp_posts img ON thumb.meta_value = img.ID\nWHERE p.post_type = 'product'\nAND p.post_status = 'publish'\nGROUP BY p.ID, p.post_title, p.post_content, p.post_excerpt, p.post_name, p.post_date, p.post_modified, pm.meta_key, pm.meta_value, img.guid;\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "LesaApp",
      "isAutoGenerated": false,
      "name": "LesaApp",
      "pluginId": "mysql-plugin"
    },
    "dynamicBindingPathList": [],
    "executeOnLoad": false,
    "name": "getProductsWithMetadata",
    "pageId": "Products",
    "userSetOnLoad": false
  }
}